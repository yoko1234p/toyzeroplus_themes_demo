{%- comment -%}
  Company Mode - Header Section
  快樂印刷頁首
  使用 theme settings 顏色配置
{%- endcomment -%}

{%- liquid
  assign primary_color = settings.color_primary | default: '#C83F49'
  assign gold_color = settings.color_secondary | default: '#B08D57'
  assign bg_color = settings.color_background | default: '#F9F9F9'
-%}

<header class="site-header sticky top-0 z-50 border-b-2" style="background-color: {{ bg_color }}; border-color: {{ primary_color }};">
  <div class="max-w-7xl mx-auto px-4 md:px-8">
    <div class="flex items-center justify-between h-16 md:h-20">

      {%- comment -%} Logo / Brand {%- endcomment -%}
      <a href="{{ routes.root_url }}" class="flex items-center gap-2 md:gap-3">
        <div class="flex gap-0.5">
          <span class="font-lhkk text-xl md:text-2xl font-bold" style="color: {{ primary_color }};">快</span>
          <span class="font-lhkk text-xl md:text-2xl font-bold" style="color: {{ primary_color }};">樂</span>
          <span class="font-lhkk text-sm md:text-base writing-vertical" style="color: {{ gold_color }};">印刷</span>
        </div>
      </a>

      {%- comment -%} Desktop Navigation {%- endcomment -%}
      <nav class="hidden md:flex items-center gap-8">
        <a
          href="{{ routes.root_url }}"
          class="font-lhkk text-sm tracking-wider transition-opacity hover:opacity-70"
          style="color: {{ primary_color }};"
        >
          首頁
        </a>
        <a
          href="{{ routes.all_products_collection_url }}"
          class="font-lhkk text-sm tracking-wider transition-opacity hover:opacity-70"
          style="color: {{ primary_color }};"
        >
          全部產品
        </a>
        {%- for link in linklists.main-menu.links -%}
          <a
            href="{{ link.url }}"
            class="font-lhkk text-sm tracking-wider transition-opacity hover:opacity-70"
            style="color: {{ primary_color }};"
          >
            {{ link.title }}
          </a>
        {%- endfor -%}
      </nav>

      {%- comment -%} Right Side Actions {%- endcomment -%}
      <div class="flex items-center gap-4">
        {%- comment -%} Search Button {%- endcomment -%}
        <a
          href="{{ routes.search_url }}"
          class="p-2 transition-opacity hover:opacity-70"
          aria-label="搜尋"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="{{ primary_color }}" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
          </svg>
        </a>

        {%- comment -%} Cart Button {%- endcomment -%}
        <a
          href="{{ routes.cart_url }}"
          class="relative p-2 transition-opacity hover:opacity-70"
          aria-label="購物車"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="{{ primary_color }}" stroke-width="2">
            <path d="M6 6h15l-1.5 9h-12z"/>
            <circle cx="9" cy="20" r="1"/>
            <circle cx="18" cy="20" r="1"/>
            <path d="M6 6L5 3H2"/>
          </svg>
          {%- if cart.item_count > 0 -%}
            <span
              class="absolute -top-1 -right-1 w-5 h-5 flex items-center justify-center text-xs font-bold text-white rounded-full"
              style="background-color: {{ primary_color }};"
            >
              {{ cart.item_count }}
            </span>
          {%- endif -%}
        </a>

        {%- comment -%} Mobile Menu Toggle {%- endcomment -%}
        <button
          type="button"
          class="md:hidden p-2"
          onclick="document.getElementById('mobile-menu').classList.toggle('hidden')"
          aria-label="選單"
        >
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="{{ primary_color }}" stroke-width="2">
            <path d="M3 12h18M3 6h18M3 18h18"/>
          </svg>
        </button>
      </div>
    </div>

    {%- comment -%} Mobile Menu {%- endcomment -%}
    <nav id="mobile-menu" class="hidden md:hidden py-4 border-t" style="border-color: {{ gold_color }};">
      <div class="flex flex-col gap-4">
        <a
          href="{{ routes.root_url }}"
          class="font-lhkk text-base py-2 transition-opacity hover:opacity-70"
          style="color: {{ primary_color }};"
        >
          首頁
        </a>
        <a
          href="{{ routes.all_products_collection_url }}"
          class="font-lhkk text-base py-2 transition-opacity hover:opacity-70"
          style="color: {{ primary_color }};"
        >
          全部產品
        </a>
        {%- for link in linklists.main-menu.links -%}
          <a
            href="{{ link.url }}"
            class="font-lhkk text-base py-2 transition-opacity hover:opacity-70"
            style="color: {{ primary_color }};"
          >
            {{ link.title }}
          </a>
        {%- endfor -%}
      </div>
    </nav>
  </div>
</header>

{% schema %}
{
  "name": "Header",
  "tag": "div",
  "class": "header-section",
  "settings": [
    {
      "type": "checkbox",
      "id": "sticky_header",
      "label": "固定頁首",
      "default": true
    }
  ]
}
{% endschema %}
